(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["89727"],{663952:function(e,t,r){r.d(t,{D:()=>l,q:()=>u});var a=r(667294),n=r(616550),i=r(575820),o=r(785893);let s=(0,a.createContext)(!1),c=()=>{let e=(0,n.TH)(),t=(0,n.k6)();return t.location.state?.isAppFactoryOAuth||((0,i.mB)(e.search).next??"").startsWith("/app-factory-oauth/")};function l({children:e}){let t=c(),[r,n]=(0,a.useState)(t);return(0,a.useEffect)(()=>{t&&n(!0)},[t]),(0,o.jsx)(s.Provider,{value:r,children:e})}function u(){return(0,a.useContext)(s)}},433069:function(e,t,r){r.d(t,{G:()=>s,b:()=>c});var a=r(667294),n=r(616550),i=r(785893);let o=(0,a.createContext)(!0);function s({children:e}){let t=(0,n.TH)(),[r,s]=(0,a.useState)(!0),c=(0,a.useRef)(t);return(0,a.useEffect)(()=>{c.current!==t&&(c.current=t,s(!1))},[t]),(0,i.jsx)(o.Provider,{value:r,children:e})}function c(){return(0,a.useContext)(o)}},860297:function(e,t,r){r.d(t,{Z:()=>eg});var a=r(616550),n=r(680405),i=r(746868),o=r(883119),s=r(351736),c=r(774838),l=r(739405),u=r(785893);let d=e=>({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[e]??"default";function p({children:e}){let t=(0,s.vs)(),r=(0,l.HG)(),{locale:a}=(0,c.B)(),n=d(a);return(0,u.jsx)(o.Ag,{colorScheme:t&&!r?"dark":"light",children:(0,u.jsx)(o.Ho,{languageMode:n,children:(0,u.jsx)(o.Ho,{forceTheme:"classic",languageMode:n,rootSelector:"excludeFromGridRepTests",children:e})})})}function m({children:e}){let t=(0,l.ml)();return(0,u.jsx)(o.Q_,{deviceType:t?"mobile":"desktop",children:e})}let h=["web_gestalt_visualrefresh","web_gestalt_calico"];function f({children:e}){let t=(0,c.B)(),r=h.reduce((e,r)=>({...e,[r]:t.experimentsClient.checkExperiment(r)}),{});return(0,u.jsx)(o.II,{value:r,children:e})}var _=r(667294),g=r(767415);function w(e){(0,g.nP)("gestalt-component-impression",{tags:{component:e}})}var v=r(609252),b=r(680391),y=r(74972);function E({children:e}){let{sheetMobileHandlers:t,linkHandlers:r,radioGroupHandlers:a,datePickerHandlers:n,dateFieldHandlers:i,dateRangeHandlers:s}=function(){let{setAppFocusState:e}=(0,y.I)(),t=(0,_.useCallback)(()=>{v.Z.pause(),e(!1)},[e]),r=(0,_.useCallback)(()=>{v.Z.resume(),e(!0)},[e]),a=(0,_.useMemo)(()=>({onOpen:t,onClose:r}),[t,r]),n=(0,_.useMemo)(()=>({onRender:()=>{w("RadioGroup")}}),[]),i=(0,_.useMemo)(()=>({onRender:()=>{w("DateField")}}),[]),o=(0,_.useMemo)(()=>({onRender:()=>{w("DatePicker")}}),[]),s=(0,_.useMemo)(()=>({onRender:()=>{w("DateRange")}}),[]);return{linkHandlers:(0,_.useMemo)(()=>({onNavigation:({href:e,target:t})=>(0,b.Z)({href:e,target:t})}),[]),sheetMobileHandlers:a,radioGroupHandlers:n,dateFieldHandlers:i,datePickerHandlers:o,dateRangeHandlers:s}}();return(0,u.jsx)(o.uu,{dateFieldHandlers:i,datePickerHandlers:n,dateRangeHandlers:s,linkHandlers:r,radioGroupHandlers:a,sheetMobileHandlers:t,children:e})}var P=r(400962),T=r(94082),x=r(663952),C=r(433069),I=r(173202),k=r(705460),N=r(953833),D=r(49831),A=r(185302),R=r(28692),L=r(169166),S=r(506807),j=r(385372),O=r(204807),Z=r(398006),B=r(648447),$=r(969809);let M=e=>{let{deviceType:t,isBot:r,isSocialBot:a}=e;return`coreWebVitalsLite.v1.${a&&"socialBot"||r&&"bot"||"nonbot"}.${t}`};var U=r(662896);let H=({botType:e,browserName:t,deviceType:r,region:a})=>{let n=`pwtlogger.${e}.${r}`,i=["all",...a?[a.toLowerCase()]:[]];"OTHER"!==a&&i.push("ALL_EXCLUDING_OTHER");let o=[];"desktop"===r?("Chrome"===t||"Edge"===t||"Safari"===t||"Firefox"===t||"Opera"===t)&&(o=[t.toLowerCase().replace(/\s/g,"_")]):"phone"===r?("Chrome"===t||"Mobile Safari"===t||"Samsung Browser"===t||"Chrome WebView"===t||"GSA"===t)&&(o=[t.toLowerCase().replace(/\s/g,"_")]):"tablet"===r&&"Chrome"===t&&(o=[t.toLowerCase().replace(/\s/g,"_")]);let s=["all",...o],c=[];return i.forEach(e=>{s.forEach(t=>{c.push(`${n}.region_${e}.browser_${t}`)})}),c};var V=r(685755),F=r(579698);let W=e=>10*Math.round(e/10),Y={pin_closeup:{LCP:"pin_closeup_lcp",INP:"pin_closeup_inp"},board:{LCP:"board_lcp",INP:"board_inp"},other_profile:{LCP:"other_profile_lcp",INP:"other_profile_inp"},topic:{LCP:"topic_lcp",INP:"topic_inp"}},z=["CA","GB","DE","FR","AU","JP","BR","MX","AU","IN"],G=({surface:e,pwtStaticContext:t})=>{switch(e){case"pin_closeup":return[...t.isAuthenticated?["desktop"===t.deviceType?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page"]:[],t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth",...t.isAuthenticated&&"desktop"===t.deviceType?["closeup_dweb_side_by_side_redesign_fast_follow"]:[]];case"board":return[t.isAuthenticated?"web_eager_loadable_auth":"web_eager_loadable_unauth"];default:return[]}},J=({pwtStaticContext:e,surface:t})=>{let r=(0,Z.Jx)({annotateExperiments:G({surface:t,pwtStaticContext:e}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:Y[t].LCP,pwtStaticContext:e}),a=(0,Z.Jx)({name:Y[t].INP,pwtStaticContext:e});return(e,t)=>{"LCP"===e?r.stop(t):"INP"===e&&a.stop(t)}},X=({pwtStaticContext:e,surface:t,getCurrentRoute:r})=>{let a=J({pwtStaticContext:e,surface:t}),{isAuthenticated:n,isBot:i,isSocialBot:o,deviceType:s,country:c,fullPath:l,browserName:u,osName:d}=e,p={},m=({name:m,value:h,metricDetails:f})=>{if(!p[m]){let _;p[m]=!0;let w=M(e),v=`${w}.${t}.${m}`,b=`${w}.tags.${t}.${m}`;if(_="iOS"===d&&"Chrome"===u?"iOS_Chrome":"CrUX","LCPCount"===m)(0,g.QX)(`${v}.sum`,h,{sampleRate:1}),(0,g.nP)(`${v}.size`,{sampleRate:1});else{let e=(0,$.Z)(c),d=(0,U.Z)(l);if("INP"===m){if(f){let{rating:t,navigationType:a}=f,{interactionTime:i,interactionType:o,loadState:s}=f.attribution,c=(0,V.Z)(i),{path:l}=r(),d={isAuth:n,path:l,CrUXSegment:_,region:e,CWVBucket:t,eventTimeGroup:c,interactionType:o,loadState:s,navigationType:a,domain:(0,O.xR)(document.domain||"unknown")};if((0,g.LY)(`${v}`,h,{sampleRate:1}),(0,g.LY)(`${b}`,h,{sampleRate:1,tags:d}),"Chrome"===u&&f.attribution){let e=(0,F.bJ)(f);e&&(0,g.LY)(`${v}.INPBoundary`,h,{sampleRate:1,tags:{...d,INPBoundary:e}}),["inputDelay","processingDuration","presentationDelay"].forEach(e=>{(0,g.LY)(`${v}.${e}`,f.attribution[e],{sampleRate:1,tags:d})})}}}else"LCP"===m?((0,g.LY)(`${v}`,h,{sampleRate:1}),(0,g.LY)(`${b}`,h,{sampleRate:1,tags:{isAuth:n,CrUXSegment:_,region:e,...d&&{pinType:d}}})):"CLS"===m&&((0,g.LY)(`${v}`,1e3*h,{sampleRate:1}),(0,g.LY)(`${b}`,1e3*h,{sampleRate:1,tags:{isAuth:n,CrUXSegment:_,region:e}}));!n&&z.includes(c)&&H({botType:o&&"socialBot"||i&&"bot"||"nonbot",browserName:u,deviceType:s,region:e}).forEach(e=>{(0,g.LY)(`${e}.tags.growthSEO.${t}_${m}`,h,{sampleRate:1,tags:{country:c}})}),a(m,h)}}};(0,j.NO)(({value:e})=>{m({name:"LCPCount",value:(0,B.Kj)()}),m({name:"LCP",value:W(e)})}),(0,j.a4)(({value:e})=>{m({name:"FCP",value:e})}),(0,j.Yn)(e=>{m({name:"INP",value:e.value,metricDetails:e})}),(0,j.mw)(({value:e})=>{m({name:"CLS",value:e})})};var q=r(426035),Q=r(381571);let K=(0,r(774303).XV)("LayoutShiftDebugger"),ee=e=>e<=.1?"good":e<=.25?"adequate":"poor",et=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&et(e.parentNode)||null,er=e=>Math.round(1e3*e),ea=[],en=e=>{let t=Object.freeze({}),r=0;ea.forEach(({value:e,shift:{sources:a},route:n,params:i,hadRecentNavigation:o,hadRecentScroll:s,isAuth:c})=>{if(r+=e,!a||!a.length)return;let l=e/a.length;a.forEach(({node:e})=>{let r=e?et(e)||"ROOT":"NODE_REMOVED",a={route:n,searchScope:i&&i.scope?i.scope:"none",boundaryId:r,hadRecentNavigation:o,hadRecentScroll:s,isAuth:c,domain:(0,O.xR)(document.domain||"unknown")},u=JSON.stringify(a);t={...t,[u]:{score:((t[u]||{}).score||0)+l,tags:a}}})}),Object.keys(t).forEach(r=>{let{score:a,tags:n}=t[r];(0,g.QX)(`${e}.shifts`,er(a),{sampleRate:1,tags:{...n}}),(0,g.LY)(`${e}.shifts`,er(a),{sampleRate:1,tags:{...n}})}),K("Debug CLS boundaries",r,t,ea),ea=[]},ei=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:r})=>{let a,n=(0,Z.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e}),i=0,o=e=>{i=e.timeStamp};window.addEventListener("scroll",o),window.addEventListener("beforeunload",()=>{window.removeEventListener("scroll",o)});let s=`${M(e)}.CLS`,c=()=>en(s),l=0,u=0,d=0;(0,j.mw)(({entries:n,value:o})=>{if(d=o||0,n.length){let{path:s,params:c}=t();a=r();let d=n[0].startTime,p=l!==d,m=p?n:n.slice(u);p&&(l=d),ea=ea.concat(m.map(t=>({value:o,shift:t,route:s,params:c,hadRecentNavigation:a>0&&a+500>t.startTime,hadRecentScroll:i>0&&i+500>t.startTime,isAuth:e.isAuthenticated}))),u=n.length}},!0);let p=setInterval(()=>{if(ea.length){c();let e=ee(d);(0,g.QX)(`${s}.${e}`,1,{sampleRate:1}),(0,g.LY)(`${s}.${e}`,1,{sampleRate:1}),n.stop(er(d))}},1e3);window.addEventListener("beforeunload",()=>{clearInterval(p),0===d&&n.abort("no_shifts_detected")})};var eo=r(591048);let es=()=>{(0,k.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach(e=>{window.performance[e]||(0,k.A9)(`not_supported.window.performance.${e}`)}):(0,k.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,k.A9)("not_supported.window.PerformanceObserer"),(0,R.v)()||(0,k.A9)("not_supported.grid_profiler")},ec=()=>window.performance?.now?window.performance.now():null,el=e=>["/advertiser/"].reduce((t,r)=>e.includes(r)||t,!1);function eu({children:e,immutableLocation:t,routerHistoryAction:r,staticContext:n}){let i=(0,_.useRef)(null),o=(0,_.useRef)(null),s=(0,_.useRef)(t),c=(0,_.useRef)(!0),{path:l,params:d}=(0,a.$B)(),p=(0,_.useRef)(l),m=(0,_.useRef)(d),h=(0,N.Z)(n.deviceType);if(h?(0,k.A9)("supportedPWTBrowser",{tags:{deviceType:n.deviceType}}):(0,k.A9)("unsupportedPWTBrowser",{tags:{deviceType:n.deviceType}}),c.current&&(0,Q.ZP)(!0,n.serverData?.trace_id),(0,_.useEffect)(()=>{p.current=l},[l]),(0,_.useEffect)(()=>{m.current=d},[d]),(0,_.useEffect)(()=>{if((0,eo.X_)(),(0,B.UQ)(),es(),c.current=!1,h&&!D.is&&"Chrome"===n.browserName){ei({staticContext:n,getCurrentRoute:()=>({path:p.current,params:m.current}),getLastNavigationTime:()=>o.current||0});let e=(0,A.e)(p.current);e&&X({pwtStaticContext:n,surface:e,getCurrentRoute:()=>({path:p.current})})}},[]),el(t.pathname)?s.current.pathname!==t.pathname:s.current!==t){s.current=t,o.current=ec();let{current:e}=o;if(!c.current){let t=!i.current;(0,k.A9)("routeStart",{tags:{action:r}}),(0,eo.Eg)(t),(0,B.Ux)(t),(0,B.on)(),(0,q.tl)(),(0,Q._T)(),(0,Q.ZP)(!1);let{defaultBufferSize:a}=(0,eo.LH)();e&&((0,k.A9)("routeStart.defaultBufferSize",{count:a}),i.current={time:e,action:r})}}return(0,u.jsx)(S.Z.Provider,{value:h?n:null,children:(0,u.jsx)(L.Z.Provider,{value:i.current,children:e})})}var ed=r(712655),ep=r(417394),em=r(23641);function eh({children:e,immutableLocation:t,routerHistoryAction:r}){if((0,ed.Z)())return function({children:e,immutableLocation:t,routerHistoryAction:r}){let a=(0,_.useRef)(!0),n=(0,_.useRef)(!1),i=(0,_.useRef)(!1),o=(0,_.useRef)(t),s=performance.now();return n.current=n.current||el(t.pathname)?o.current.pathname!==t.pathname:o.current!==t,n.current&&!i.current&&((0,ep.yh)("routeChange"),i.current=!0),(0,_.useLayoutEffect)(()=>{if((el(t.pathname)?o.current.pathname!==t.pathname:o.current!==t)||a.current){o.current=t;let e=a.current?0:s;(0,ep.ep)(r,e,a.current),(0,em.Nx)("NavigationCompletev4"),a.current=!1,n.current=!1,i.current=!1}},[a,r,t,s,n]),e}({children:e,immutableLocation:t,routerHistoryAction:r})}var ef=r(57887);function e_({children:e,traceLoggerData:t}){let r=(0,c.B)(),n=(0,a.k6)(),i=(0,a.TH)(),o=(0,I.Z)({requestContext:r,traceLoggerData:t});return(0,k.iF)(n.action),(0,u.jsx)(eu,{immutableLocation:i,routerHistoryAction:n.action,staticContext:o,children:(0,u.jsx)(eh,{immutableLocation:i,routerHistoryAction:n.action,children:e})})}function eg({children:e,context:t,copytuneExperiments:r,inContextTranslation:a,requestContext:o,resourceCreator:s,traceLoggerData:c}){return(0,u.jsx)(n.E,{value:t,children:(0,u.jsx)(e_,{traceLoggerData:c,children:(0,u.jsx)(m,{children:(0,u.jsx)(f,{children:(0,u.jsx)(p,{children:(0,u.jsx)(T.Z,{copytuneExperiments:r,enableInContextTranslation:a,locale:o.locale,children:(0,u.jsx)(P.nK,{children:(0,u.jsx)(y.g,{children:(0,u.jsx)(E,{children:(0,u.jsx)(C.G,{children:(0,u.jsx)(i.Ih,{children:(0,u.jsx)(x.D,{children:(0,u.jsx)(ef.UZ,{resourceCreator:s,children:e})})})})})})})})})})})})})}},462214:function(e,t,r){r.d(t,{Z:()=>i});var a=r(465989),n=r(767415);function i(e,t,r,i,o){let s=new URLSearchParams,c=t.reduce((e,t)=>{if(null!=t){let r=function(e){let t;try{t=decodeURIComponent(e)}catch(r){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(a){let r=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(r&&r.length>1)return r[1];return e}}(t);return e.add(r)}return e},new Set);s.append(a.NR.SOURCE_EVENT_ID,e??"0"),s.append(a.NR.DESTINATION,JSON.stringify([...c])),s.append(a.NR.EXPIRY,r?a.uV:a.ug),s.append(a.NR.PRIORITY,r?a.NR.CLICK_PRIORITY:a.NR.VIEW_PRIORITY),o&&s.append(a.NR.ADVERTISER_ID,o),i&&s.append(a.NR.CAMPAIGN_ID,i),s.append(a.NR.SOURCE_EVENT_TYPE,r?a.bC:a.Cu);try{let{hostname:e}=new URL(window.location.href);"www.pinterest.com"!==e&&s.append(a.NR.HOSTNAME,e)}catch(e){(0,n.nP)("webapp.arapi.generateARASourceEventURL",{sampleRate:.1,tags:{status:"failed",href:window&&window.location&&window.location.href}})}return"https://www.pinterest.com/attribution_source/?"+s.toString()}},301538:function(e,t,r){let a,n;r.d(t,{Ch:()=>v,ZP:()=>A,cA:()=>C,li:()=>I,a:()=>D,nc:()=>N});var i=r(172045),o=r(430037),s=r(27399),c=r(11442),l=r(71133),u=r(746868),d=r(997776),p=r(730056),m=r(424868),h=r(907049),f=r(762693),_=r(767415);let g=new Set([6945,170,3700]),w=new Set([3700]),v={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},b=[4700,4701,4702,4703,7042,7043],y=e=>(0,d.Z)(JSON.stringify(e)),E=e=>t=>t.view_type===e.viewType&&t.view_parameter===e.viewParameter&&t.event_type===e.eventType&&t.object_id_str===e.objectIdStr&&(0,h.Z)(t.view_data,e.viewData),P=e=>g.has(e),T=e=>!P(e)||P(e)&&w.has(e);function x(){let e=new Date;a?a&&a.getUTCDate()!==e.getUTCDate()&&(a=e,(0,c.Z)()):a=e}let C=e=>{let t=e.event_type,r=b.includes(t),a=(0,u.BE)();return!!r||13===t||!!a},I=(e,t)=>{let r=e.event_type,a=b.includes(r),n=(0,u.BE)();return a?e:13===r&&e.view_type?(t?.({viewType:e.view_type,viewParameter:e.view_parameter,viewData:n?.viewData?(0,p.Z)(n.viewData,e.view_data):e.view_data}),e):!n||e.view_type&&e.view_parameter?e:{...e,view_type:n.viewType||e.view_type,view_parameter:n.viewParameter,view_data:e.view_data?(0,p.Z)(e.view_data,n.viewData):n.viewData}},k=e=>{let t={};return e?.storyPinProductEventData&&(t={...t,storyPinProductEventData:e.storyPinProductEventData}),t},N=(e,t)=>{let{component:r,element:a}=e,n=e.object_id_str,i=e.view_type,o=e.event_type,{appState:s}=e;return(e.event_data?.[t]||[]).map(c=>({auxData:e.aux_data,...r?{component:r}:{},eventData:c,...o?{eventType:o}:{},...i?{viewType:i}:{},viewData:e.view_data,viewParameter:e.view_parameter,...n?{objectIdStr:n}:null,impressionType:t,...k(e.event_data),appState:s,...a?{element:a}:{}}))??[]},D=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function A(){let e=[],t=[],r=0;function a(){return[...e,...t.reduce((e,t)=>{let r=e.find(E(t));if(r&&!P(t.eventType))t.impressionType in r.event_data?r.event_data[t.impressionType].push(t.eventData):r.event_data[t.impressionType]=[t.eventData];else{let r=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},a={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,i.Z)(),component:t.component,event_data:{...r,[t.impressionType]:T(t.eventType)?[t.eventData]:{...t.eventData,...(t.eventData||{})[t.impressionType]}},event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,l.Z)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(a)}return e},[])]}function c({error:e,isError:t,isDroppedEvent:r,isImpression:a}){let n,i=(0,o.Z)(),s=i?.userAgent||{},c=!(s.isMobile||s.isTablet),l={error_message:e?.message??"unknown",appType:c?"WEB_DENZEL":"WEB_MOBILE",country:i?.country??"unknown",browserName:s.browserName,osName:s.osName,browserType:s.browserType,browserVersion:s.browserVersion,isError:t,isImpression:a};n=r?"dropped":t?"errors":"success",(0,_.nP)(`webapp.metrics.contextLog.indexdb.${n}`,{tags:l})}async function u(){try{await n?.clear()}catch(e){c({isError:!0,error:{message:"Error while clearing cache",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}function d(){e=[],t=[],r=0}async function p(e){try{let t={...e,cache_created_time:(0,l.Z)(),isImpression:!1,aux_data:{...e.aux_data,is_context_cached:!0}};await n?.setItem((0,i.Z)(),t)}catch(e){c({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function h(e){try{let t={...e,cache_created_time:(0,l.Z)(),isImpression:!0,auxData:{...e.auxData,is_impression_cached:!0}};await n?.setItem((0,i.Z)(),t)}catch(e){c({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}async function g(){let e=a(),t=0,r=1e3;if(!e.length)return;let n=s.Z.create("ApiCResource",{events:e,report_time:(0,l.Z)()}),i=async()=>{try{await n.callCreate({async:!0,showError:!1}),u()}catch(n){let a=!n?.api_error_code||[m.dO,m.cZ,m.i1].includes(n.api_error_code);if(!function({retryAttempts:e,error:t,events:r}){let a=(0,o.Z)(),n=a?.userAgent||{},i=!(n.isMobile||n.isTablet),s={error_code:t?.api_error_code??"unknown",retryAttempts:e,appType:i?"WEB_DENZEL":"WEB_MOBILE",country:a?.country??"unknown",browserName:n.browserName,eventSize:r.length,osName:n.osName,browserType:n.browserType,browserVersion:n.browserVersion};(0,_.nP)("metrics_quality_web_retry_error_log",{tags:s})}({retryAttempts:t,error:n,events:e}),a&&t<5){let e=r;t+=1,r*=2,setTimeout(i,e)}else u()}};i(),d(),x()}async function w(){try{(await n?.getAllItem()||[]).forEach(r=>{let{value:a}=r,{cache_created_time:n,isImpression:i,...o}=a;(0,l.Z)()-n>864e11?c({isDroppedEvent:!0,isError:!1}):i?(t.push(o),c({isImpression:!0,isError:!1})):(e.push(o),c({isError:!1}))}),g(),u()}catch(e){c({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}return{flushContextEvents:g,getContextEvents:a,logContextEvent:function({object_id_str:t,...a}){let n=(0,l.Z)(),o={aux_data:{},event_data:{},view_data:{},...a,time:n,clientUUID:(0,i.Z)(),...t?{object_id_str:t}:null};o.aux_data=function(e){if(!e)return e;let{element:t,eventData:r,component:a,objectId:n,view:i,viewParameter:o,viewData:s,durationNs:c,pairId:l,clientTrackingParams:u,...d}=e;return d}(o.aux_data),r+y(o)>20480&&g(),e.push(o),r+=y(o),x(),p(o)},logImpression:function(e){r+y(e)>20480&&g(),t.push(e),r+=y(e),h(e)},resetEventsBuffer:d,syncCachedEndEvents:w,_getIndexDBInstance:function(){return n},initiateIndexDBCache:function(){window?.indexedDB&&(n=n||new f.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},71133:function(e,t,r){r.d(t,{Z:()=>n,s:()=>a});let a=()=>{let e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},n=()=>1e6*Date.now()},169166:function(e,t,r){r.d(t,{Z:()=>a});let a=(0,r(667294).createContext)(null)},506807:function(e,t,r){r.d(t,{Z:()=>a});let a=(0,r(667294).createContext)(null)},398006:function(e,t,r){r.d(t,{Jx:()=>I,ku:()=>D,PY:()=>N});var a=r(774303),n=r(705460),i=r(426035),o=r(381571),s=r(827039),c=r(449896),l=r(192496),u=r(648447);let d=()=>(0,u.PJ)().reduce((e,{identifier:t,loadTime:r,renderTime:a})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:r,[`${t}_dupe_renderTime`]:a}:e:{...e,[`${t}_loadTime`]:r,[`${t}_renderTime`]:a},Object.freeze({}));var p=r(649324),m=r(525939),h=r(591048);let f=e=>{let t=(0,h.y0)();return e.reduce((e,{name:r,match:a})=>t.filter(e=>a(e)).slice(0,2).reduce((e,t,a)=>({...e,...(0,s.jh)(`${r}${a?"_dupe1":""}_`,(0,p.Z)(t))}),e),Object.freeze({}))},_=e=>{if("pin_closeup"!==e)return{};{let e=(0,m.Z)();return f([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}};var g=r(780764),w=r(217472),v=r(337751),b=r(662896),y=r(679767),E=r(240083),P=r(296264);let T=(0,a.XV)("LightStopwatch"),x=()=>{let e=[],t=null;return window.PerformanceObserver&&(t=(0,y.Z)({entryTypes:["resource"]},t=>{(e=e.concat(t.getEntries())).length>1e3&&(e=e.slice(-1e3))})),{get:()=>e,disconnect:()=>{t&&t.disconnect()}}},C={},I=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:r,name:a,pwtStaticContext:u})=>{let p=x(),m=(0,b.Z)(u.fullPath),h=!0,f={...m?{pagePath:{value:m,type:"STRING"}}:{}},y=(0,o.jf)();(0,n.A9)(`TIMING.${a}`,{tags:{isAuth:u.isAuthenticated}});let I={type:"stopwatch",name:a,navigationType:"initial_app_load",isAuthenticated:u.isAuthenticated,surface:""},k={abort:m=>{if(!h)return void(0,n.H)("duplicate_abort_action",{action:a});h=!1;let b=(0,E.Z)(),T=(0,l.Z)(),x=p.get(),C={reason:m,type:"ABORT",traceId:y,startTime:0,endTime:P.Z?.now()||0,spans:[{name:"network_resources",id:b,startTime:0,endTime:P.Z?.now()||0,annotationMap:{},binaryAnnotationMap:{},parentId:null},...x.map(e=>(0,v.Z)((0,g.p)(e,[]),b)).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",r?_(r):{}),...(0,s.jh)("element_",d()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,i.gQ)(),t):{}),...(0,s.jh)("browser_",T?(0,s.D3)(T):{})},binaryAnnotationMap:(0,c.ng)({annotateExperiments:e,metricId:I,pwtStaticContext:u,performanceResourceTimings:x,binaryAnnotations:f,type:"ABORT"})};(0,w.Z)({metricId:I,pwtStaticContext:u,result:C,isAuth:u.isAuthenticated}),(0,o.$B)()},error:(e,t)=>{let r={...t,action:a};if(!h)return void(0,n.H)("duplicate_error_action",r);e&&(0,n.H)(e,r),p&&p.disconnect(),h=!1,(0,o.$B)()},stop:m=>{if(!h)return void(0,n.H)("duplicate_stop_action",{action:a});h=!1,p.disconnect();let b=(0,E.Z)(),P=(0,l.Z)(),T=p.get(),x={type:"COMPLETE",traceId:y,startTime:0,endTime:m,spans:[{name:"network_resources",id:b,startTime:0,endTime:m,annotationMap:{},binaryAnnotationMap:{},parentId:null},...T.map(e=>(0,v.Z)((0,g.p)(e,[]),b)).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",r?_(r):{}),...(0,s.jh)("element_",d()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,i.gQ)(),t):{}),...(0,s.jh)("browser_",P?(0,s.D3)(P):{})},binaryAnnotationMap:(0,c.ng)({annotateExperiments:e,metricId:I,pwtStaticContext:u,performanceResourceTimings:T,binaryAnnotations:f,type:"COMPLETE"})};(0,w.Z)({metricId:I,pwtStaticContext:u,result:x,isAuth:u.isAuthenticated}),(0,o.$B)()},addBinaryAnnotation:(e,t,r)=>{T(`adding binary annotation {${e}: ${String(t)}}`),f={...f,...{[e]:{value:t,type:r}}}}};return C[a]=k,k},k=e=>C[e],N=e=>!!k(e),D=({stopwatchName:e,binaryAnnotationName:t,value:r,annotationType:a})=>{let n=k(e);n&&n.addBinaryAnnotation(t,r,a)}},525939:function(e,t,r){r.d(t,{Z:()=>n,f:()=>a});let a="closeupImage",n=()=>{if(!document.querySelector)return null;let e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},762693:function(e,t,r){r.d(t,{Z:()=>a});class a{constructor(e,t="myDatabase",r="myStore"){var a,n,i;a="cache",n=new Map,(a="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"))?i:i+"")in this?Object.defineProperty(this,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[a]=n,this.dbName=t,this.storeName=r,this.dbPromise=(async()=>{try{return await this.initializeDB(e)}catch{return null}})()}async initializeDB(e){return new Promise((t,r)=>{try{let a=e.open(this.dbName,1);a.onerror=()=>{r(Error("IndexedDB initialization error: "+a.error))},a.onupgradeneeded=()=>{let e=a.result;e.objectStoreNames.contains(this.storeName)||e.createObjectStore(this.storeName,{keyPath:"key"})},a.onsuccess=()=>{t(a.result)}}catch(e){r(Error("IndexedDB initialization error: "+e))}})}async reopenDatabaseIfClosed(){let e=await this.dbPromise;return e&&!e.close?e:(this.dbPromise=this.initializeDB(window.indexedDB),this.dbPromise)}async getObjectStore(e="readwrite"){let t=await this.reopenDatabaseIfClosed();return t?t.transaction(this.storeName,e).objectStore(this.storeName):null}async getItem(e){if(this.cache.has(e))return this.cache.get(e)||null;let t=await this.getObjectStore();return t?new Promise((r,a)=>{let n=t.get(e);n.onerror=()=>a(n.error),n.onsuccess=()=>{let t=n.result?.value||null;null!==t&&this.cache.set(e,t),r(t)}}):null}async getAllItem(){let e=await this.getObjectStore();return e?new Promise((t,r)=>{let a=e.getAll();a.onerror=()=>r(a.error),a.onsuccess=()=>{a.result?.forEach(e=>{this.cache.set(e.key,e.value)}),t(a.result)}}):null}async setItem(e,t){this.cache.set(e,t);let r=await this.getObjectStore();return r?new Promise((a,n)=>{let i=r.put({key:e,value:t});i.onerror=()=>{n(i.error)},i.onsuccess=()=>{a(null)}}):null}async removeItem(e){this.cache.delete(e);let t=await this.getObjectStore();return t?new Promise((r,a)=>{let n=t.delete(e);n.onerror=()=>a(n.error),n.onsuccess=()=>r(null)}):null}async clear(){this.cache.clear();let e=await this.getObjectStore();return e?new Promise((t,r)=>{let a=e.clear();a.onerror=()=>r(a.error),a.onsuccess=()=>t(null)}):null}}},209045:function(e,t,r){let a;r.d(t,{w:()=>f});var n=r(430037),i=r(71133),o=r(762693),s=r(141483),c=r(629724),l=r(767415);function u(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let d=null,p={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},m=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"",h=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function f({contextLogger:e}){if(a||(a=window?.indexedDB?new o.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),d)return d;let t=new Map,r=(0,c.Z)()&&(0,c.Z)().debug_timespent,f=[],_=r?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};return console.group||(_.group=(...e)=>console.log(...e),_.groupEnd=(...e)=>{}),d=new class{constructor(){u(this,"appTimedPair",null),u(this,"clickthroughProperties",null),u(this,"historyStackContext",null),u(this,"offsiteTimedPair",null),u(this,"offsiteTimedPairForegroundId",null),u(this,"pins",Object.freeze({})),u(this,"addEventListeners",()=>{let{hidden:e,visibilityChange:t}=(0,i.s)();t&&document.addEventListener(t,t=>{document[e]?this.unregisterApp(void 0,t):this.registerApp()},!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",e=>this.unregisterApp(void 0,e));let r=h(e=>this.unregisterApp(void 0,e));window.addEventListener("beforeunload",r),window.addEventListener("pagehide",r);let a=navigator&&navigator.userAgent.toLowerCase();a&&a.includes("macintosh")&&a.includes("chrome")&&window.addEventListener("popstate",()=>{document.hasFocus()||document[e]||(0,l.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),u(this,"storeClickthroughProperties",e=>{this.clickthroughProperties&&(0,l.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),this.clickthroughProperties={time:(0,i.Z)(),...e}}),u(this,"clearClickthroughProperties",()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null}),u(this,"registerApp",()=>{_.group("App Foreground",m()),null==this.appTimedPair?(this.appTimedPair=new s.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&e.logContextEvent({event_type:4700,pair_id:this.appTimedPair.uuid})):_.error("TimedPair already exists for app."),_.groupEnd()}),u(this,"logIndexDbStatLog",({error:e,isError:t,isDroppedEvent:r})=>{let a,i=(0,n.Z)(),o=i?.userAgent||{},s=!(o.isMobile||o.isTablet),c={error_message:e?.message??"unknown",appType:s?"WEB_DENZEL":"WEB_MOBILE",country:i?.country??"unknown",browserName:o.browserName,osName:o.osName,browserType:o.browserType,browserVersion:o.browserVersion,isError:t,errorName:e?.errorName??"unknown",errorDetails:e?.details??"unknown",errorStackTrace:e?.stack_trace??"unknown"};a=r?"dropped":t?"errors":"success",(0,l.nP)(`webapp.metrics.timespent.indexdb.${a}`,{tags:c})}),u(this,"unregisterApp",(t=!1,r)=>{_.group("App Background",m());let{appTimedPair:a}=this;if(null!=a){this._pauseAllComponents();let t=a.end();this._startOffsiteTimedPair(),e.logContextEvent({event_type:4701,duration_ns:t,pair_id:a.uuid}),this.appTimedPair=null}else _.error("No TimedPair found for app.");let n=["beforeunload","pagehide"],i=n.includes(r?.type),o=n.includes(r?.pauseReason);(i||o)&&this._endOffsiteTimedPair(),t||e.flushContextEvents(),_.groupEnd()}),u(this,"_activateComponent",t=>{_.group("Activating component",m()),r&&_.log(t.getContext());let a=t.getTimedPair();if(a){a.start();let{view:r,viewParameter:n,component:i,element:o,objectId:s,clientTrackingParams:c}=t.getLoggerContext();e.logContextEvent({event_type:4702,view_type:r,view_parameter:n,component:i,element:o,object_id_str:s,view_data:t.props.viewData,pair_id:a.uuid,clientTrackingParams:c,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}_.groupEnd()}),u(this,"_deactivateComponent",t=>{_.group("Deactivating component",m()),r&&_.log(t.getContext());let a=t.getTimedPair();if(a){let{view:r,viewParameter:n,component:i,element:o,objectId:s,clientTrackingParams:c}=a,l=a.end();e.logContextEvent({event_type:4703,view_type:r,view_parameter:n,component:i,element:o,object_id_str:s,view_data:t.props.viewData,duration_ns:l,pair_id:a.uuid,clientTrackingParams:c,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:t.getParentId(),...t.props.auxData}})}_.groupEnd()}),u(this,"_startOffsiteTimedPair",()=>{let{clickthroughProperties:t}=this;t&&(this.offsiteTimedPair=new s.Z({...t,view:186,viewParameter:t.view_parameter,objectId:t.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,t.aux_data={...t.aux_data,time_to_offsite:void 0!==t.time&&null!==t.time&&"number"==typeof t.time?(0,i.Z)()-t.time:void 0},e.logContextEvent({...t,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}}),this._addOffSitePairToIndexDB({offsiteTimedPairUUID:this.offsiteTimedPair?.uuid,clickthroughProperties:t,timeCreated:this.offsiteTimedPair?.startTime,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId}))}),u(this,"_endOffsiteTimedPair",()=>{let{offsiteTimedPair:t,clickthroughProperties:r}=this;if(t&&r){let a=t.end();e.logContextEvent({...r,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...r.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:a}),this._removeOffSitePairByIdFromIndexDB(this.offsiteTimedPair?.uuid),this._syncCachedTimedPairEndEvents(),this._onOffsiteEnd(),this.clearClickthroughProperties()}else this._syncCachedTimedPairEndEvents()}),u(this,"_addOffSitePairToIndexDB",async({offsiteTimedPairUUID:e,clickthroughProperties:t,timeCreated:r,offsiteTimedPairForegroundId:n})=>{try{await a?.setItem(e,{clickthroughProperties:{...t},timeCreated:r,offsiteTimedPairForegroundId:n})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),u(this,"_addAppTimerToIndexDB",async({foregroundAppTimerUUID:e,timeCreated:t})=>{try{await a?.setItem(e,{timeCreated:t})}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),u(this,"_removeAppTimerFromIndexDB",async({foregroundAppTimerUUID:e})=>{try{if(!e)return;await a?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),u(this,"_removeOffSitePairByIdFromIndexDB",async e=>{try{if(!e)return;await a?.removeItem(e)}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),u(this,"_syncCachedTimedPairEndEvents",async()=>{try{(await a?.getAllItem()||[]).forEach(async t=>{let{key:r,value:a}=t,{clickthroughProperties:n,timeCreated:i,offsiteTimedPairForegroundId:o}=a,c=(0,s.h)();i&&(0,s.h)()-i>864e11?this.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(e.logContextEvent({...n,event_type:4703,view_type:186,pair_id:r||null,aux_data:{...n?.aux_data,time_spent_foreground_pairid:o,is_timed_pair_cached:!0},duration_ns:i?c-i:null}),this.logIndexDbStatLog({isError:!1}))}),await a?.clear()}catch(e){this.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e instanceof Error?e.message:"Unknown error",stack_trace:e instanceof Error?e.stack??"No stack trace available":"No stack trace available",errorName:e instanceof Error?e.name:"N/A"}})}}),u(this,"_onOffsiteEnd",()=>{_.group("Trigger onOffsiteEndCallbacks"),f.forEach(e=>e({appTimedPair:this.appTimedPair,clickthroughProperties:this.clickthroughProperties,offsiteTimedPair:this.offsiteTimedPair,offsiteTimedPairForegroundId:this.offsiteTimedPairForegroundId})),_.groupEnd()}),u(this,"_pauseAllComponents",()=>{_.group("Pause all components"),t.forEach((e,t,r)=>{e===p.ACTIVE&&this._deactivateComponent(t),r.set(t,p.PAUSED)}),_.groupEnd()}),u(this,"_unpauseAllComponents",()=>{_.group("Unpause all components"),t.forEach((e,r)=>{let a=new s.Z(r.getLoggerContext());r.setTimedPair(a,()=>{t.set(r,p.ACTIVE),this._activateComponent(r)})}),_.groupEnd()})}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}startOffsiteRightClickTimedPair(t=!1){this._startOffsiteTimedPair(),t||e.flushContextEvents()}registerComponent(e){null===this.appTimedPair?t.set(e,p.PAUSED):(t.set(e,p.ACTIVE),this._activateComponent(e))}unregisterComponent(e){t.get(e)===p.ACTIVE&&(this._deactivateComponent(e),e.setTimedPair(new s.Z(e.getLoggerContext()))),t.delete(e)}size(){return t.size}onOffsiteEnd(e){f.push(e)}removeOnOffsiteEnd(e){let t=f.indexOf(e);t>-1&&f.splice(t,1)}_getIndexDBInstance(){return a}_getContextLogger(){return e}_clearTimeSpentManager(){d=null}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/89727-8d7e73bf2fe31f39.mjs.map